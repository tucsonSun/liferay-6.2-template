<?xml version="1.0"?>
<!DOCTYPE project>
<project name="EGR-Move-SDK-Properties-Files" default="help">

	<property environment="env" />


	<condition property="isWindows">
		<os family="windows" />
	</condition>

	<condition property="isUnix">
		<os family="unix" />
	</condition>

	<target name="help">
		<echo message="Helper target. This is intented to move app properties to the liferay SDK path." />
	</target>

	<target name="move-properties-to-sdk-path" description="target will move properties to liferay SDK path" depends="setWindowsPaths, setUnixPaths">
		<echo message="Complete........" />

	</target>

	<target name="setWindowsPaths" if="isWindows">
		<echo message="Ant detected that OS isWindows= ${isWindows}" />
		<antcall target="windowsMoveTarget" />
	</target>

	<target name="setUnixPaths" if="isUnix">
		<echo message="Ant detected that OS isLinux= ${isUnix}" />
		<antcall target="unixMoveTarget" />
	</target>


	<target name="windowsMoveTarget">	
		<property  file="../build.ErnestoRendon-Win8.properties" />	
		<property name="tomcatPath" value="${app.server.tomcat.dir}" />
		<property name="sdk.dir" value="${app.server.parent.dir}"/>
		
		<echo message="the sdk.dir path='${sdk.dir}'" />
		<property name="cmd1" value="dir *.properties*" />
		<property name="cmd2" value="copy *.properties ${sdk.dir}" />
		
		<echo message="run command='${cmd1}'" />
		<exec dir="${sdk.dir}" executable="cmd" failonerror="true">
			<arg line="/c '${cmd1}'"/>
		</exec>
		
		<echo message="run command='${cmd2}'" />
		<exec dir="." executable="cmd" failonerror="true">
			<arg line="/c '${cmd2}'"/>
		</exec>
		
		<echo message="run command='${cmd1}'" />
		<exec dir="${sdk.dir}" executable="cmd" failonerror="true">
			<arg line="/c '${cmd1}'"/>
		</exec>
	</target>

	
	<target name="unixMoveTarget">	
		<property  file="../build.ErnestoGarciaRendon-Ubuntu.properties" />	
		<property name="tomcatPath" value="${app.server.tomcat.dir}" />
		<property name="sdk.dir" value="${app.server.parent.dir}"/>
		
		<echo message="the sdk.dir path='${sdk.dir}'" />
		<property name="cmd1" value="ls -al ${sdk.dir}/*properties*;" />
		<property name="cmd2" value="cp *.properties ${sdk.dir}/;" />
				
		<echo message="run command='${cmd1}'" />
		<exec dir="${sdk.dir}" executable="/bin/sh" failonerror="true">
			<arg value="-c" />
			<arg value="${cmd1}"/>
		</exec>
		
		
		<echo message="run command='${cmd2}'" />
		<exec dir="." executable="/bin/sh" failonerror="true">
			<arg value="-c" />
			<arg value="${cmd2}"/>
		</exec>

		<echo message="run command='${cmd1}'" />
		<exec dir="${sdk.dir}" executable="/bin/sh" failonerror="true" outputproperty="cmd3.result">
			<arg value="-c" />
			<arg value="${cmd1}"/>
		</exec>
		<echo message="${cmd3.result}" />
	</target>
	

</project>
