<?xml version="1.0"?>
<!DOCTYPE project>
<project name="EGR-JAX-WebService-Generator" default="help">

	<condition property="isWindows">
		<os family="windows" />
	</condition>

	<condition property="isUnix">
		<os family="unix" />
	</condition>

	<!-- Windows path -->
	<property name="jdk.windows.home" value="C:/Program Files/Java/jdk1.7.0_45" />
	<!-- Linux path -->
	<property name="jdk.linux.home" value="/usr/lib/jvm/java-7-openjdk-amd64" />

	<property name="wsdl" value="http://www.webservicex.com/globalweather.asmx?wsdl" />
	<property name="package" value="com.egr.external.ws.globalweather" />
	<property name="src" value="docroot/WEB-INF/src" />
	<property name="classes" value="docroot/WEB-INF/classes" />

	<target name="help">
		<echo message="This is a simple Ant script that is used to generate the required
			     Java class files associated with a WSDL. It uses the JAX-WS tool
			     wsimport that is supplied with the JDK." />
	</target>

	<target name="generate-web-service-classes" description="target will generate Java classes from a specifed WSDL using JAX-WS" depends="setWindowsPaths, setUnixPaths">
		<echo message="jdk.home = '${jdk.home}'" />
		<echo message="wsdl = '${wsdl}'" />
		<echo message="package = '${package}'" />
		<echo message="src = '${src}'" />
		<echo message="classes = '${classes}'" />

		<exec executable="${jdk.home}/bin/wsimport">
			<arg line="-keep -s ${src} -p ${package} -d ${classes} ${wsdl} -B-XautoNameResolution" />
		</exec>
	</target>

	<target name="print-version" description="print out java version">
		<echo>Java/JVM version: ${ant.java.version}</echo>
		<echo>Java/JVM detail version: ${java.version}</echo>
	</target>


	<target name="setWindowsPaths" if="isWindows">
		<echo message="Ant detected that OS isWindows= ${isWindows}" />
		<property name="jdk.home" value="${jdk.windows.home}" />
	</target>

	<target name="setUnixPaths" if="isUnix">
		<echo message="Ant detected that OS isLinux= ${isUnix}" />
		<property name="jdk.home" value="${jdk.linux.home}" />
	</target>
</project>
